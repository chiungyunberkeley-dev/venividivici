<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡±è–©GLORY - å®˜æ–¹ç¶²ç«™</title>
    <style type="text/css">@import url("https://assets.mlcdn.com/fonts.css?version=1764685");</style>
    <style>
        :root { --bg-color: #262626; --text-color: #ddd; --accent-gold: #d4af37; --accent-orange: #ff7f50; --accent-pink: #ff69b4; --tag-default: #EC7969; --tag-active: #FFD45A; --header-color: #EC7969; 
        /* å®šç¾©æ›¸ç±åˆ†é¡é¡è‰² */
        --theme-blue: #3FC3EB; --theme-green: #A4CC1B; --theme-purple: #CC99FF; --theme-red: #F55660; --theme-black: #A1A1A1; --theme-yellow: #FFD45A; }
        
        body { margin: 0; padding: 0; background-color: var(--bg-color); font-family: "Noto Serif TC", "Microsoft JhengHei", serif; color: var(--text-color); overflow-x: hidden; }
        a { text-decoration: none; color: inherit; cursor: pointer; transition: 0.3s; } a:hover { color: var(--tag-active); }
        ul { list-style: none; padding: 0; margin: 0; } * { box-sizing: border-box; }
        
        #system-loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #222; color: #d4af37; display: flex; justify-content: center; align-items: center; z-index: 9999; font-size: 20px; flex-direction: column; }
        
        header { display: flex; justify-content: space-between; align-items: center; padding: 15px 40px; border-bottom: 1px solid #333; background: #1a1a1a; position: sticky; top: 0; z-index: 1000; }
        .logo { font-size: 24px; font-weight: bold; color: var(--accent-gold); display: flex; align-items: center; }
        .logo img { max-height: 40px; width: auto; } .logo span { margin-right: 5px; font-family: serif; font-size: 28px; }
        nav ul { display: flex; gap: 25px; } nav ul li a { font-size: 15px; color: #ccc; cursor: pointer; } nav ul li a.active { color: var(--tag-active); border-bottom: 2px solid var(--tag-active); padding-bottom: 5px; }
        .login-btn { border: 1px solid #555; padding: 4px 10px; border-radius: 4px; font-size: 12px; color: #888; } .login-btn:hover { border-color: var(--accent-gold); color: var(--accent-gold); }

        .page-section { display: none; padding: 40px 20px; max-width: 1200px; margin: 0 auto; animation: fadeIn 0.5s; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Components */
        .section-header { display: flex; align-items: center; justify-content: center; margin: 50px 0 30px; width: 100%; }
        .section-header span { color: var(--header-color); font-size: 16px; letter-spacing: 2px; margin: 0 15px; font-weight: bold; white-space: nowrap; }
        .section-header::before, .section-header::after { content: ""; display: block; flex-grow: 1; height: 10px; background-color: var(--header-color); clip-path: polygon(0% 45%, calc(100% - 15px) 45%, calc(100% - 15px) 0%, 100% 50%, calc(100% - 15px) 100%, calc(100% - 15px) 55%, 0% 55%); }
        .section-header::after { transform: scaleX(-1); }
        .rich-text-content { line-height: 1.8; color: #ccc; white-space: pre-wrap; }
        .rich-text-content a { color: var(--theme-yellow); text-decoration: underline; }
        .rich-text-content strong { color: #fff; font-weight: bold; }

        /* Home */
        .hero-carousel { width: 100%; height: 450px; background: #000; position: relative; overflow: hidden; margin-bottom: 30px; border-bottom: 1px solid #444; }
        .carousel-slide { width: 100%; height: 100%; position: absolute; opacity: 0; transition: opacity 1s; background-size: cover; background-position: center; display: flex; align-items: flex-end; justify-content: center; }
        .carousel-slide.active { opacity: 1; }
        .carousel-caption { background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); padding: 30px; color: #fff; width: 100%; text-align: center; font-size: 24px; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        .news-section { background: #262626; padding: 20px 0; margin-top: 20px; border-top: 1px solid #444; }
        .news-title { color: #fff; font-size: 28px; margin-bottom: 30px; text-align: center; font-weight: normal; letter-spacing: 2px; }
        #homeNoticeArea { margin-bottom: 40px; padding: 20px; border: 1px dashed var(--header-color); border-radius: 8px; background: rgba(236, 121, 105, 0.05); }
        .year-block { margin-bottom: 30px; border-bottom: 1px dashed #444; padding-bottom: 20px; display: flex; flex-direction: column; align-items: center; width: 100%; }
        .year-title { color: #eee; font-size: 14px; font-weight: bold; margin-bottom: 15px; width: 100%; max-width: 660px; text-align: left; padding-left: 0; }
        .book-list-row { display: flex; flex-wrap: wrap; gap: 20px; margin: 0 auto; width: 100%; max-width: 660px; justify-content: flex-start; }
        .book-list-item { width: 320px; display: flex; align-items: center; font-size: 13px; margin-bottom: 8px; text-align: left; flex-shrink: 0; }
        .home-book-tag { width: auto; height: 18px; margin-right: 8px; vertical-align: middle; }
        .shop-list { display: flex; flex-wrap: wrap; gap: 15px; font-size: 13px; color: var(--theme-yellow); justify-content: center; line-height: 1.8; width: 100%; max-width: 660px; margin: 0 auto; justify-content: flex-start;}
        .shop-item { margin: 0; }

        /* Books & Merch */
        .category-icons { display: flex; justify-content: center; gap: 25px; margin-bottom: 30px; flex-wrap: wrap; align-items: flex-end; }
        .icon-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.3s; } .icon-item:hover { transform: translateY(-5px); }
        .category-img { height: 60px; width: auto; object-fit: contain; margin-bottom: 0; display: block; }
        .tags-section { margin-bottom: 40px; display: flex; flex-direction: column; align-items: flex-start; gap: 15px; }
        .tags-row { display: flex; align-items: center; flex-wrap: wrap; gap: 10px; width: 100%; }
        .tag-btn { background: transparent; border: 1px solid var(--tag-default); color: var(--tag-default); padding: 5px 15px; border-radius: 20px; font-size: 14px; cursor: pointer; transition: 0.3s; white-space: nowrap; }
        .tag-btn.active { background: transparent !important; border-color: var(--tag-active) !important; color: var(--tag-active) !important; font-weight: bold; }
        .book-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 50px; }
        
        .book-card { display: flex; flex-direction: column; padding-bottom: 25px; border-bottom: 1px solid transparent; }
        .theme-blue { border-bottom-color: var(--theme-blue); } .theme-blue .t-color { color: var(--theme-blue); border-color: var(--theme-blue); }
        .theme-green { border-bottom-color: var(--theme-green); } .theme-green .t-color { color: var(--theme-green); border-color: var(--theme-green); }
        .theme-red { border-bottom-color: var(--theme-red); } .theme-red .t-color { color: var(--theme-red); border-color: var(--theme-red); }
        .theme-purple { border-bottom-color: var(--theme-purple); } .theme-purple .t-color { color: var(--theme-purple); border-color: var(--theme-purple); }
        .theme-black { border-bottom-color: var(--theme-black); } .theme-black .t-color { color: var(--theme-black); border-color: var(--theme-black); }
        .theme-yellow { border-bottom-color: var(--theme-yellow); } .theme-yellow .t-color { color: var(--theme-yellow); border-color: var(--theme-yellow); }

        .book-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .book-title-group { display: flex; align-items: center; gap: 0; }
        .book-tag-img { height: 24px; width: auto; vertical-align: middle; margin: 0; padding: 0; display: block; margin-right: 10px; }
        .book-title { font-size: 20px; margin: 0; padding: 0; line-height: 1; }
        .book-price { color: #fff; font-size: 16px; }
        .divider { border-top: 1px dotted; margin: 10px 0; opacity: 0.7; }
        .book-meta { font-size: 12px; margin-bottom: 15px; }
        .book-content { display: flex; gap: 20px; margin-bottom: 15px; }
        .book-cover { width: 140px; height: 200px; background: #444; object-fit: cover; flex-shrink: 0; }
        .book-desc { font-size: 14px; line-height: 1.6; color: #ccc; text-align: justify; white-space: pre-wrap; }
        .action-buttons { display: flex; gap: 15px; margin-top: auto; }
        .btn { flex: 1; padding: 10px 0; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; text-align: center; }
        .btn-buy { background: #fa8072; color: #fff; } .btn-info { background: #f4d03f; color: #333; }
        
        /* Merch Fix */
        .merch-header-container { text-align: center; margin: 60px 0 50px; position: relative; }
        .merch-main-title { color: #ff9e80; font-size: 80px; font-family: sans-serif; margin: 0; line-height: 0.8; letter-spacing: 2px; font-weight: normal; text-transform: capitalize; }
        .merch-sub-title { color: #EC7969; font-size: 16px; letter-spacing: 5px; margin-top: 15px; font-weight: bold; }
        .merch-divider { display: flex; align-items: center; justify-content: center; margin-top: 20px; width: 100%; }
        .merch-divider::before, .merch-divider::after { content: ""; display: block; width: 100px; height: 2px; background-color: #EC7969; }

        /* Activity */
        .activity-title { text-align: center; font-size: 48px; color: #ff9e80; margin: 40px 0 10px; font-family: sans-serif; letter-spacing: 2px; }
        .activity-grid { display: flex; flex-direction: column; gap: 80px; max-width: 800px; margin: 40px auto; }
        .activity-item { display: flex; flex-direction: row; align-items: center; gap: 40px; position: relative; justify-content: center; }
        .activity-content-wrapper { flex: 1; text-align: center; max-width: 400px;}
        .activity-name { font-size: 36px; color: #F55660; margin-bottom: 5px; letter-spacing: 2px; }
        .activity-date { font-size: 18px; color: #F55660; font-weight: bold; margin-bottom: 20px; }
        .activity-desc { font-size: 14px; line-height: 1.8; color: #ccc; margin-bottom: 20px; }
        .activity-image-wrapper { position: relative; width: 350px; }
        .activity-main-img { width: 100%; border: 5px solid #fff; transform: rotate(-5deg); box-shadow: 0 10px 20px rgba(0,0,0,0.5); display: block;}
        .activity-number { font-size: 140px; color: #FFD45A; font-family: sans-serif; font-weight: bold; position: absolute; bottom: -30px; right: -30px; z-index: 10; text-shadow: 0 0 20px rgba(0,0,0,0.8); line-height: 1; }

        /* Contact */
        .contact-container { display: flex; align-items: center; justify-content: center; gap: 80px; margin-top: 50px; flex-wrap: wrap; }
        .contact-image-wrapper { width: 450px; height: 450px; flex-shrink: 0; clip-path: polygon(20% 0%, 90% 0%, 100% 20%, 100% 90%, 80% 100%, 10% 100%, 0% 80%, 0% 10%); overflow: hidden;}
        .contact-image { width: 100%; height: 100%; object-fit: cover; }
        .contact-info { text-align: left; max-width: 300px; }
        .contact-title { font-size: 48px; color: #ff9e80; margin-bottom: 40px; font-family: sans-serif; letter-spacing: 2px; }
        .contact-content-area a { color: #FFD45A; text-decoration: none; }
        .contact-content-area { font-size: 16px; color: #FFD45A; line-height: 2; }
        .contact-content-area strong, .contact-content-area b { color: #ff9e80; font-size: 22px; display: block; margin-top: 25px; margin-bottom: 5px; font-weight: bold;}

        /* Author */
        .authors-overview { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .author-card { background: #222; padding: 30px; border-radius: 10px; border-top: 3px solid transparent; transition:0.3s; }
        .author-card:hover { transform: translateY(-5px); border-top-color: var(--accent-gold); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .ac-header { text-align: center; margin-bottom: 20px; cursor: pointer; }
        .ac-avatar { width: 140px; height: 140px; border-radius: 50%; border: 3px solid var(--accent-gold); object-fit: cover; margin-bottom: 10px; }
        .ac-name { color: var(--accent-gold); font-size: 22px; font-weight: bold; }
        .ac-list-section { margin-bottom: 20px; }
        .ac-list-title { color: var(--header-color); font-size: 14px; font-weight: bold; margin-bottom: 10px; border-left: 3px solid var(--header-color); padding-left: 8px; }
        .ac-list ul { font-size: 13px; color: #ccc; line-height: 1.8; }
        .ac-list li { margin-bottom: 4px; }
        .author-detail-header { display: flex; gap: 40px; margin-bottom: 30px; background: #222; padding: 30px; border-radius: 10px; align-items: flex-start; }
        .ad-avatar { width: 160px; height: 160px; border-radius: 50%; border: 3px solid var(--accent-gold); object-fit: cover; flex-shrink: 0; }
        .ad-info { flex: 1; }
        .ad-name { font-size: 28px; color: var(--accent-gold); margin-bottom: 10px; font-weight: bold; }
        .bunsen-layout-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 40px; margin-bottom: 40px; }
        .links-wrapper { background: #2a2a2a; padding: 20px; border-radius: 10px; }
        
        /* ç”Ÿç”Ÿå®‡å®™ - è† å›ŠæŒ‰éˆ•æ¨£å¼ */
        .universe-section { display: flex; flex-direction: column; align-items: center; margin: 40px 0; width: 100%; }
        .universe-links { display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap; width: 100%; text-align: center; }
        .universe-links a, .universe-links b {
            display: inline-block;
            border: 1px solid #777;
            border-radius: 50px;
            padding: 10px 30px;
            margin: 5px 10px;
            text-decoration: none;
            color: #ddd;
            font-size: 15px;
            transition: 0.3s;
            background: rgba(255, 255, 255, 0.05);
            font-weight: normal; 
            cursor: pointer;
        }
        .universe-links a:hover, .universe-links b:hover {
            border-color: var(--accent-gold);
            color: var(--accent-gold);
            transform: translateY(-2px);
            background: rgba(212, 175, 55, 0.1);
        }

        .text-work-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 30px; text-align: center; }
        .text-work-item { margin-bottom: 10px; background: #2a2a2a; padding: 15px; border-radius: 8px; }
        .t-work-title { color: var(--theme-yellow); font-weight: bold; font-size: 16px; display: block; margin-bottom: 8px; border-bottom: 1px dotted #555; padding-bottom: 5px;}
        .t-work-meta { font-size: 12px; color: #aaa; line-height: 1.6; }
        .t-work-note { color: var(--header-color); font-size: 12px; margin-top: 5px; white-space: pre-wrap; }
        .pub-work-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 40px; margin-top: 30px; align-items: end;}
        .pub-work-item { text-align: center; }
        .pub-cover { width: 100%; aspect-ratio: 2/3; object-fit: cover; border: 1px solid #444; margin-bottom: 10px; transition: transform 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.5);}
        .pub-cover:hover { transform: translateY(-5px); border-color: var(--accent-gold); }
        .pub-title { font-size: 14px; color: var(--theme-yellow); margin-bottom: 5px; font-weight: bold; line-height: 1.4; }
        .pub-meta { font-size: 12px; color: #888; }

        /* Admin */
        #login-page { text-align: center; padding-top: 100px; }
        .login-box { background: #333; padding: 40px; border-radius: 10px; display: inline-block; border: 1px solid var(--accent-gold); width: 300px; }
        .login-title { color: var(--accent-gold); font-size: 24px; margin-bottom: 20px; }
        .login-input { width: 100%; padding: 10px; margin-bottom: 20px; background: #222; border: 1px solid #555; color: #fff; text-align: center; }
        .admin-panel { display: none; padding: 20px; max-width: 1200px; margin: 0 auto; }
        .admin-panel.active { display: block; }
        .form-row { display: flex; gap: 20px; margin-bottom: 15px; }
        .form-group { flex: 1; text-align: left; }
        .form-control { width: 100%; padding: 8px; background: #333; border: 1px solid #555; color: #fff; }
        .btn-submit { background: var(--theme-blue); color: white; padding: 10px 20px; border: none; cursor: pointer; width: 100%; margin-top: 10px;}
        .tab-menu { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #444; padding-bottom: 10px; justify-content: flex-start; align-items: center; flex-wrap: wrap;}
        .tab-btn { background: transparent; border: 1px solid #555; color: #aaa; padding: 5px 15px; cursor: pointer; border-radius: 5px; }
        .tab-btn.active { background: var(--accent-gold); color: #000; border-color: var(--accent-gold); font-weight: bold;}
        .logout-btn { background: #d32f2f; color: #fff; border: none; padding: 5px 15px; cursor: pointer; font-size: 12px; border-radius: 4px; margin-left: auto;}
        .settings-group { border: 1px solid #444; padding: 15px; margin-bottom: 20px; border-radius: 5px; background: #2a2a2a; }
        .settings-title { color: var(--accent-gold); margin-bottom: 15px; font-weight: bold; border-bottom: 1px dashed #555; padding-bottom: 5px; }

        /* Editor */
        .editor-container { border: 1px solid #555; background: #222; }
        .editor-toolbar { padding: 8px; border-bottom: 1px solid #555; background: #333; display: flex; gap: 5px; flex-wrap: wrap; }
        .editor-btn { background: #444; color: #fff; border: 1px solid #666; padding: 4px 8px; cursor: pointer; border-radius: 3px; font-size: 14px; }
        .editor-btn:hover { background: #555; }
        .editor-select { background: #444; color: #fff; border: 1px solid #666; padding: 4px; border-radius: 3px; }
        .editor-color { padding: 0; border: none; height: 28px; width: 28px; cursor: pointer; background: transparent; }
        .editor-content { min-height: 150px; padding: 10px; color: #ddd; outline: none; line-height: 1.6; }
        .editor-content:focus { background: #2a2a2a; }
        .editor-content a { color: var(--theme-blue); text-decoration: underline; }
        .upload-wrapper { display: flex; gap: 10px; align-items: center; }
        .upload-btn { background: #555; border: 1px solid #777; color: white; padding: 5px 10px; cursor: pointer; border-radius: 4px; font-size: 12px; }

        @media (max-width: 768px) {
            header { flex-direction: column; gap: 15px; padding: 15px; }
            .book-grid, .authors-overview, .bunsen-layout-grid { grid-template-columns: 1fr; }
            .hero-carousel { height: 300px; }
            .author-detail-header { flex-direction: column; align-items: center; text-align: center; }
            .universe-links { flex-direction: column; }
            .book-list-row, .year-title { max-width: 320px; }
            .contact-container { flex-direction: column; }
            .activity-item { flex-direction: column; }
            .activity-image-wrapper { width: 100%; }
        }
    </style>
</head>
<body>
    <div id="system-loading">
        <p>ç³»çµ±è¼‰å…¥ä¸­...</p>
        <p style="font-size:14px; color:#888;">å¦‚æœç•«é¢æŒçºŒå¡åœ¨æ­¤è™•ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šæˆ–é‡‘é‘°è¨­å®šã€‚</p>
    </div>

    <header>
        <div class="logo" id="site-logo-container"><span>âšœ</span> å‡±è–©GLORY</div>
        <nav>
            <ul>
                <li><a href="javascript:void(0)" onclick="route('home')" id="nav-home" class="active">Home</a></li>
                <li><a href="javascript:void(0)" onclick="route('books')" id="nav-books">Books</a></li>
                <li><a href="javascript:void(0)" onclick="route('merch')" id="nav-merch">Merch</a></li>
                <li><a href="javascript:void(0)" onclick="route('author')" id="nav-author">About</a></li>
                <li><a href="javascript:void(0)" onclick="route('activity')" id="nav-activity">Activity</a></li>
                <li><a href="javascript:void(0)" onclick="route('contact')" id="nav-contact">Contact</a></li>
                <li><a href="javascript:void(0)" onclick="route('admin')" id="nav-admin" class="login-btn">å¾Œå°</a></li>
            </ul>
        </nav>
    </header>

    <div id="home" class="page-section active">
        <div class="hero-carousel" id="homeCarousel"></div>
        <div id="homeNoticeArea" style="display:none;" class="rich-text-content"></div>
        <div class="news-section">
            <h2 class="news-title" id="homePageTitle">NEW PUBLICATION - æœ€æ–°å‡ºç‰ˆè³‡è¨Š</h2>
            <div id="homeNewsContent"></div>
        </div>
    </div>

    <div id="books" class="page-section">
        <div class="category-icons">
            <div class="icon-item" onclick="filterByColor('theme-yellow')"><img src="https://res.cloudinary.com/dd9vqt742/image/upload/v1765255999/yellow_vzisxe.png" class="category-img"></div>
            <div class="icon-item" onclick="filterByColor('theme-black')"><img src="https://res.cloudinary.com/dd9vqt742/image/upload/v1765256032/grey_mxj5gy.png" class="category-img"></div>
            <div class="icon-item" onclick="filterByColor('theme-purple')"><img src="https://res.cloudinary.com/dd9vqt742/image/upload/v1765245173/purple_dfjlsl.png" class="category-img"></div>
            <div class="icon-item" onclick="filterByColor('theme-blue')"><img src="https://res.cloudinary.com/dd9vqt742/image/upload/v1765245172/blue_odz4iv.png" class="category-img"></div>
            <div class="icon-item" onclick="filterByColor('theme-red')"><img src="https://res.cloudinary.com/dd9vqt742/image/upload/v1765245172/red_poycll.png" class="category-img"></div>
            <div class="icon-item" onclick="filterByColor('theme-green')"><img src="https://res.cloudinary.com/dd9vqt742/image/upload/v1765245172/green_lihr34.png" class="category-img"></div>
        </div>
        <div class="tags-section">
            <div class="tags-row" id="tagRow1"></div>
            <div class="tags-row" id="tagRow2"></div>
        </div>
        <div class="book-grid" id="bookCatalog"></div>
    </div>

    <div id="merch" class="page-section">
        <div class="merch-header-container">
             <h1 class="merch-main-title">Merch</h1>
             <div class="merch-sub-title">å„é …è¡ç”Ÿé€±é‚Š</div>
             <div class="merch-divider"></div>
        </div>
        <div class="book-grid" id="merchCatalog"></div>
    </div>

    <div id="activity" class="page-section">
        <div class="activity-title">Activity</div>
        <div class="activity-grid" id="activityList"></div>
    </div>

    <div id="contact" class="page-section">
        <div class="contact-container">
            <div class="contact-image-wrapper"><img id="contactImage" src="" class="contact-image"></div>
            <div class="contact-info contact-content-area" id="contactContent"></div>
        </div>
    </div>

    <div id="author" class="page-section">
        <div class="authors-overview">
            <div class="author-card">
                <div class="ac-header" onclick="routeAuthorDetail('moscato')">
                    <img src="https://via.placeholder.com/200/444/fff?text=Moscato" id="ov-avatar-moscato">
                    <div class="ac-name">â—† è«æ–¯å¡æ‰˜ â—†</div>
                </div>
                <div id="ov-list-moscato"></div>
            </div>
            <div class="author-card">
                <div class="ac-header" onclick="routeAuthorDetail('bunsen')">
                    <img src="https://via.placeholder.com/200/444/fff?text=Bunsen" id="ov-avatar-bunsen">
                    <div class="ac-name">â—† æœ¬ç”Ÿç‡ˆ â—†</div>
                </div>
                <div id="ov-list-bunsen"></div>
            </div>
        </div>
    </div>

    <div id="author-detail" class="page-section">
        <div id="ad-content"></div>
    </div>

    <div id="login-page" class="page-section">
        <div class="login-box">
            <div class="login-title">ç®¡ç†å“¡ç™»å…¥</div>
            <input type="email" id="adminEmail" class="login-input" placeholder="è«‹è¼¸å…¥ Email">
            <input type="password" id="adminPwd" class="login-input" placeholder="è«‹è¼¸å…¥å¯†ç¢¼">
            <button class="btn-submit" onclick="window.loginWithSupabase()">ç™»å…¥</button>
            <p id="loginMsg" style="color:red; margin-top:10px;"></p>
        </div>
    </div>

    <div id="admin" class="admin-panel">
        <div class="tab-menu">
            <div class="tab-group">
                <button class="tab-btn active" onclick="switchAdminTab('books')">æ›¸ç±</button>
                <button class="tab-btn" onclick="switchAdminTab('merch')">é€±é‚Š</button>
                <button class="tab-btn" onclick="switchAdminTab('authors')">ä½œè€…</button>
                <button class="tab-btn" onclick="switchAdminTab('activity')">æ´»å‹•</button>
                <button class="tab-btn" onclick="switchAdminTab('contact')">è¯çµ¡</button>
                <button class="tab-btn" onclick="switchAdminTab('home')">é¦–é </button>
            </div>
            <button class="logout-btn" onclick="logout()">ç™»å‡º</button>
        </div>

        <div id="adm-books">
            <h3 style="color: var(--theme-blue);">æ–°å¢ / ç·¨è¼¯æ›¸ç±</h3>
            <input type="hidden" id="editId">
            <div class="form-row"><div class="form-group"><label>æ›¸å</label><input type="text" id="inTitle" class="form-control"></div><div class="form-group"><label>ä½œè€…</label><select id="inAuthor" class="form-control"><option value="æœ¬ç”Ÿç‡ˆ">æœ¬ç”Ÿç‡ˆ</option><option value="è«æ–¯å¡æ‰˜">è«æ–¯å¡æ‰˜</option><option value="è«æ–¯å¡æ‰˜ã€æœ¬ç”Ÿç‡ˆ">åˆè‘—</option></select></div><div class="form-group"><label>ç‹€æ…‹</label><select id="inStatus" class="form-control" onchange="togglePubFields()"><option value="ongoing">é€£è¼‰ä¸­</option><option value="completed">å·²å®Œçµ</option><option value="published">å·²å‡ºç‰ˆ</option></select></div></div>
            <div class="form-row"><div class="form-group"><label>å­—æ•¸</label><input type="text" id="inWordCount" class="form-control"></div><div class="form-group"><label>CP</label><input type="text" id="inCP" class="form-control"></div></div>
            <div class="form-row"><div class="form-group"><label>Tags</label><input type="text" id="inTags" class="form-control"></div>
            <div class="form-group"><label>ç›´å¼å°é¢ (åˆ—è¡¨ç”¨)</label><div class="upload-wrapper"><input type="text" id="inCover" class="form-control" placeholder="ç¶²å€æˆ–ä¸Šå‚³"><input type="file" id="upCover" accept="image/*" style="display:none;" onchange="uploadImage(this, 'inCover')"><button class="upload-btn" onclick="document.getElementById('upCover').click()">ä¸Šå‚³</button></div></div></div>
            
            <div class="form-group"><label>é¦–é è¼ªæ’­åœ– (æ©«å¼ - å»ºè­° 1920x600)</label><div class="upload-wrapper"><input type="text" id="inCarouselCover" class="form-control" placeholder="ç¶²å€æˆ–ä¸Šå‚³"><input type="file" id="upCarouselCover" accept="image/*" style="display:none;" onchange="uploadImage(this, 'inCarouselCover')"><button class="upload-btn" onclick="document.getElementById('upCarouselCover').click()">ä¸Šå‚³</button></div></div>

            <div class="form-group" style="border-top:1px dashed #555; padding-top:15px; margin-top:15px;">
                <label style="color:var(--accent-orange);">â˜… å®£å‚³é è¨­å®š</label>
                <div class="form-group">
                    <label>å®£å‚³é èƒŒæ™¯åœ– (Promo Background)</label>
                    <div class="upload-wrapper">
                        <input type="text" id="inPromoBg" class="form-control" placeholder="ç•™ç©ºå‰‡è‡ªå‹•ä½¿ç”¨ã€Œé¦–é è¼ªæ’­åœ–ã€">
                        <input type="file" id="upPromoBg" accept="image/*" style="display:none;" onchange="uploadImage(this, 'inPromoBg')">
                        <button class="upload-btn" onclick="document.getElementById('upPromoBg').click()">ä¸Šå‚³è‡ªè¨‚åœ–</button>
                    </div>
                    <p style="font-size:12px; color:#888;">â€» è‹¥æ­¤æ¬„ç•™ç©ºï¼Œç³»çµ±å°‡é è¨­ä½¿ç”¨ä¸Šæ–¹çš„ã€Œé¦–é è¼ªæ’­åœ–ã€ä½œç‚ºèƒŒæ™¯ã€‚</p>
                </div>
            </div>

            <div class="form-group"><label>æ–‡æ¡ˆ (å¯æ’é€£çµ)</label><div class="editor-container"><div id="bookDescEditor" class="editor-content" contenteditable="true"></div></div></div>
            <div id="pubFields" style="display:none; border:1px solid #555; padding:10px; margin-bottom:15px; background:#2a2a2a; margin-top:10px;"><label style="color:var(--theme-green); font-weight:bold; display:block; margin-bottom:10px;">â˜… å‡ºç‰ˆè¨­å®š</label><div class="form-row"><div class="form-group"><label>å®šåƒ¹</label><input type="text" id="inPrice" class="form-control"></div><div class="form-group"><label>åˆ†é¡é¡è‰²</label><select id="inColor" class="form-control"><option value="theme-blue">è—è‰²</option><option value="theme-green">ç¶ è‰²</option><option value="theme-purple">ç´«è‰²</option><option value="theme-red">ç´…è‰²</option><option value="theme-black">ç°è‰²</option><option value="theme-yellow">é»ƒè‰²</option></select></div></div><div class="form-row"><div class="form-group"><label>è³¼è²·é€£çµ</label><input type="text" id="inBuy" class="form-control"></div><div class="form-group"><label>å‡ºç‰ˆå¹´ä»½</label><input type="text" id="inYear" class="form-control"></div></div><div class="form-group"><label><input type="checkbox" id="inCarousel"> åŠ å…¥é¦–é è¼ªæ’­</label></div></div>
            <div class="form-group"><label>è³‡è¨Šé é€£çµ</label><input type="text" id="inInfo" class="form-control"></div>
            <div class="form-group"><label><input type="checkbox" id="addToNews"> ç™¼å¸ƒä¸Šæ¶è¨Šæ¯</label></div>
            <button class="btn-submit" onclick="saveBook()">å„²å­˜æ›¸ç±</button>
            <hr style="border-color:#444; margin:30px 0;"><div style="overflow-x:auto;"><table style="width:100%; border-collapse:collapse; font-size:14px; min-width:600px;"><thead><tr style="background:#333; color:var(--accent-gold);"><th style="padding:10px;">ID</th><th>æ›¸å</th><th>å¹´ä»½</th><th>ç‹€æ…‹</th><th style="text-align:right">æ“ä½œ</th></tr></thead><tbody id="adminBookList"></tbody></table></div>
        </div>

        <div id="adm-merch" style="display:none;">
            <h3 style="color: var(--accent-orange);">å‘¨é‚Šå•†å“ç®¡ç†</h3>
            <input type="hidden" id="editMerchId">
            <div class="form-row"><div class="form-group"><label>å•†å“åç¨±</label><input type="text" id="inMerchTitle" class="form-control"></div><div class="form-group"><label>åƒ¹æ ¼</label><input type="text" id="inMerchPrice" class="form-control"></div></div>
            <div class="form-row"><div class="form-group"><label>Tags</label><input type="text" id="inMerchTags" class="form-control"></div>
            <div class="form-group"><label>åœ–ç‰‡</label><div class="upload-wrapper"><input type="text" id="inMerchCover" class="form-control"><input type="file" id="upMerch" accept="image/*" style="display:none;" onchange="uploadImage(this, 'inMerchCover')"><button class="upload-btn" onclick="document.getElementById('upMerch').click()">ä¸Šå‚³</button></div></div></div>
            <div class="form-group"><label>æè¿° (å¯æ’é€£çµ)</label><div class="editor-container"><div id="merchDescEditor" class="editor-content" contenteditable="true"></div></div></div>
            <div class="form-row"><div class="form-group"><label>è³¼è²·é€£çµ</label><input type="text" id="inMerchBuy" class="form-control"></div><div class="form-group"><label>è³‡è¨Šé é€£çµ</label><input type="text" id="inMerchInfo" class="form-control"></div></div>
            <button class="btn-submit" onclick="saveMerch()">å„²å­˜å•†å“</button>
            <hr style="border-color:#444; margin:30px 0;"><div id="adminMerchList"></div>
        </div>

        <div id="adm-activity" style="display:none;">
            <h3 style="color: var(--accent-pink);">æ´»å‹•ç®¡ç†</h3>
            <input type="hidden" id="editActId">
            <div class="form-row"><div class="form-group"><label>æ´»å‹•æ¨™é¡Œ</label><input type="text" id="inActTitle" class="form-control"></div><div class="form-group"><label>æ—¥æœŸå€é–“</label><input type="text" id="inActDate" class="form-control"></div></div>
            <div class="form-group"><label>åœ–ç‰‡</label><div class="upload-wrapper"><input type="text" id="inActImg" class="form-control"><input type="file" id="upAct" accept="image/*" style="display:none;" onchange="uploadImage(this, 'inActImg')"><button class="upload-btn" onclick="document.getElementById('upAct').click()">ä¸Šå‚³</button></div></div>
            <div class="form-group"><label>æ´»å‹•å…§å®¹ (å¯æ’é€£çµ)</label><div class="editor-container"><div id="actContentEditor" class="editor-content" contenteditable="true"></div></div></div>
            <button class="btn-submit" onclick="saveActivity()">å„²å­˜æ´»å‹•</button>
            <hr style="border-color:#444; margin:30px 0;"><div id="adminActList"></div>
        </div>

        <div id="adm-contact" style="display:none;">
             <h3 style="color: var(--header-color);">è¯çµ¡è³‡è¨Šè¨­å®š</h3>
             <div class="form-group"><label>åœ–ç‰‡</label><div class="upload-wrapper"><input type="text" id="inContactImg" class="form-control"><input type="file" id="upContact" accept="image/*" style="display:none;" onchange="uploadImage(this, 'inContactImg')"><button class="upload-btn" onclick="document.getElementById('upContact').click()">ä¸Šå‚³</button></div></div>
             <div class="form-group"><label>å…§å®¹ (å¯æ–°å¢é …ç›®/é€£çµ)</label><div class="editor-container"><div id="contactContentEditor" class="editor-content" contenteditable="true" style="min-height:300px;"></div></div></div>
            <button class="btn-submit" onclick="saveContact()">å„²å­˜</button>
        </div>

        <div id="adm-authors" style="display:none;">
            <h3 style="color: var(--accent-gold);">ä½œè€…é è³‡è¨Šæ›´æ–°</h3>
            <div class="form-group"><label>é¸æ“‡ä½œè€…</label><select id="authorSelect" class="form-control" onchange="loadAuthorData()"><option value="moscato">è«æ–¯å¡æ‰˜</option><option value="bunsen">æœ¬ç”Ÿç‡ˆ</option></select></div>
            <div class="form-group"><label>å…¬å‘Š (å¯æ’é€£çµ)</label><div class="editor-container"><div id="authNewsEditor" class="editor-content" contenteditable="true" style="min-height:100px;"></div></div></div>
            <div class="form-group"><label>é ­åƒ</label><div class="upload-wrapper"><input type="text" id="authAvatar" class="form-control"><input type="file" id="upAvatar" accept="image/*" style="display:none;" onchange="uploadImage(this, 'authAvatar')"><button class="upload-btn" onclick="document.getElementById('upAvatar').click()">ä¸Šå‚³</button></div></div>
            <div class="form-group"><label>ç°¡ä»‹ (å¯æ’é€£çµ)</label><div class="editor-container"><div id="authBioEditor" class="editor-content" contenteditable="true"></div></div></div>
            <div class="form-group"><label>æ›´æ–°/è³¼è²·é€£çµ (HTML/å¯æ’é€£çµ)</label><div class="editor-container"><div id="authLinksEditor" class="editor-content" contenteditable="true"></div></div></div>
            <div class="form-group" id="bunsenUniverseGroup" style="display:none;"><label>ç”Ÿç”Ÿå®‡å®™ (åƒ…æœ¬ç”Ÿç‡ˆ)</label>
                <p style="color:#888;font-size:12px;margin:0 0 5px 0;">â˜… èªªæ˜ï¼šè«‹è¼¸å…¥æ–‡å­—ï¼Œåç™½å¾Œé»ã€Œç²—é«” (B)ã€æˆ–ã€Œé€£çµç¬¦è™Ÿ (ğŸ”—)ã€ï¼Œå°±æœƒè®Šè† å›ŠæŒ‰éˆ•ã€‚</p>
                <div class="editor-container"><div id="authUniverseEditor" class="editor-content" contenteditable="true"></div></div>
            </div>
            <button class="btn-submit" onclick="saveAuthorInfo()">æ›´æ–°ä½œè€…è³‡è¨Š</button>
        </div>

        <div id="adm-home" style="display:none;">
             <h3 style="color: var(--accent-gold);">é¦–é èˆ‡ç¶²ç«™è¨­å®š</h3>
             <div class="settings-group"><div class="settings-title">åŸºæœ¬è³‡è¨Š</div><div class="form-group"><label>ç¶²ç«™åç¨±</label><input type="text" id="setSiteName" class="form-control"></div><div class="form-group"><label>Logo</label><div class="upload-wrapper"><input type="text" id="setLogoUrl" class="form-control"><input type="file" id="upLogo" accept="image/*" style="display:none;" onchange="uploadImage(this, 'setLogoUrl')"><button class="upload-btn" onclick="document.getElementById('upLogo').click()">ä¸Šå‚³</button></div></div><div class="form-group"><label>é¦–é å¤§æ¨™é¡Œ</label><input type="text" id="setHomeTitle" class="form-control"></div></div>
             <div class="settings-group"><div class="settings-title">é¦–é é¡å¤–å…¬å‘Š (ç½®é ‚/å¯æ’é€£çµ)</div><div class="editor-container"><div id="setHomeNoticeEditor" class="editor-content" contenteditable="true"></div></div></div>
             <div class="form-group"><label>è³¼æ›¸ç®¡é“å…§å®¹ (HTML/å¯æ’é€£çµ)</label><div class="editor-container"><div id="homeContentEditor" class="editor-content" contenteditable="true"></div></div></div>
            <button class="btn-submit" onclick="saveHomeSettings()">å„²å­˜è¨­å®š</button>
        </div>
    </div>

    <script>
    window.books = []; window.authors = {}; window.merch = []; window.activity = []; window.contact = {}; window.siteSettings = {}; window.homeContent = "";
    let isLoggedIn = false;
    const authorTags = ["å…¨éƒ¨ä½œå“", "è«æ–¯å¡æ‰˜", "æœ¬ç”Ÿç‡ˆ"];
    const themeTags = ["è€½ç¾", "ä¸€èˆ¬å‘", "ç©¿è¶Š", "æ¼”è—åœˆ", "è»è­¦", "æ‡¸ç–‘æ¨ç†", "ç¾ä»£éƒ½å¸‚", "æ­ç¾é¢¨", "å¼·å¼·", "é›™æ€§ç”Ÿå­", "å¥‡å¹»æ¶ç©º", "æ˜Ÿéš›", "éª¨ç§‘", "å¹´ä¸‹", "ABO", "äººå¤–"];

    window.route = function(page) {
        document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('nav a').forEach(el => el.classList.remove('active'));
        if (page === 'admin') {
            if (!isLoggedIn) document.getElementById('login-page').classList.add('active');
            else { 
                document.getElementById('admin').classList.add('active'); 
                if(window.renderAdmin) window.renderAdmin(); 
            }
            document.getElementById('nav-admin').classList.add('active');
        } else {
            const targetSection = document.getElementById(page);
            if(targetSection) {
                targetSection.classList.add('active');
                const navBtn = document.getElementById('nav-' + page);
                if(navBtn) navBtn.classList.add('active');
                if(page === 'home' && window.renderHome) window.renderHome();
                if(page === 'books' && window.renderBooks) window.renderBooks();
                if(page === 'merch' && window.renderMerch) window.renderMerch();
                if(page === 'author' && window.renderAuthorOverview) window.renderAuthorOverview();
                if(page === 'activity' && window.renderActivity) window.renderActivity();
                if(page === 'contact' && window.renderContact) window.renderContact();
            }
        }
        window.scrollTo(0,0);
    }
    
    window.initEditors = function() {
        const containers = document.querySelectorAll('.editor-container');
        containers.forEach(c => {
            if(c.querySelector('.editor-toolbar')) return;
            const toolbar = document.createElement('div');
            toolbar.className = 'editor-toolbar';
            toolbar.innerHTML = `<button class="editor-btn" onclick="formatDoc('bold')"><b>B</b></button><button class="editor-btn" onclick="formatDoc('italic')"><i>I</i></button><button class="editor-btn" onclick="formatDoc('underline')"><u>U</u></button><button class="editor-btn" onclick="formatDoc('createLink')">ğŸ”—</button><select class="editor-select" onchange="formatDoc('fontSize', this.value)"><option value="3">å¤§å°</option><option value="1">å°</option><option value="3">ä¸­</option><option value="5">å¤§</option><option value="7">ç‰¹å¤§</option></select><input type="color" class="editor-color" onchange="formatDoc('foreColor', this.value)" title="é¡è‰²"><button class="editor-btn" onclick="formatDoc('removeFormat')">æ¸…é™¤</button>`;
            c.insertBefore(toolbar, c.firstChild);
        });
    }
    window.formatDoc = function(cmd, value) {
        if(cmd === 'createLink') { const url = prompt("è«‹è¼¸å…¥é€£çµç¶²å€", "http://"); if(url) document.execCommand(cmd, false, url); }
        else { document.execCommand(cmd, false, value); }
    }
    
    const CLOUD_NAME = 'dd9vqt742'; 
    const UPLOAD_PRESET = 'glorybooks'; 

    window.uploadImage = async function(input, targetId) {
        const file = input.files[0]; if (!file) return;
        const formData = new FormData();
        formData.append('file', file);
        formData.append('upload_preset', UPLOAD_PRESET);
        const loadingText = document.createElement('span');
        loadingText.innerText = " ä¸Šå‚³ä¸­..."; input.parentNode.appendChild(loadingText);
        try {
            const res = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, { method: 'POST', body: formData });
            const data = await res.json();
            document.getElementById(targetId).value = data.secure_url;
            alert("åœ–ç‰‡ä¸Šå‚³æˆåŠŸï¼");
        } catch (e) { alert("ä¸Šå‚³å¤±æ•—"); console.error(e); } finally { loadingText.remove(); }
    }
    </script>

    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

        const SUPABASE_URL = 'https://pxwpbknyzmaeksyxwsbs.supabase.co'; 
        const SUPABASE_KEY = 'sb_publishable_bmXwK1lP_7t31l0Hv0RDTg_Sd9tIx5j'; 

        let supabase = null;
        if(SUPABASE_URL && SUPABASE_KEY) supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

        async function fetchData() {
            if(!supabase) return;
            try {
                const loader = document.getElementById('system-loading');
                if(loader) loader.style.display = 'flex';

                const [bRes, aRes, mRes, actRes, cRes, sRes] = await Promise.all([
                    supabase.from('books').select('*'),
                    supabase.from('authors').select('*'),
                    supabase.from('merch').select('*'),
                    supabase.from('activities').select('*'),
                    supabase.from('contact').select('*').limit(1),
                    supabase.from('site_settings').select('*').limit(1)
                ]);

                if(bRes.data) window.books = bRes.data;
                if(aRes.data) {
                    window.authors = {}; 
                    aRes.data.forEach(a => {
                        window.authors[a.id] = { id: a.id, name: a.name, avatar: a.avatar, bio: a.bio, news: a.news, linksHTML: a.links_html, universeHTML: a.universe_html };
                    });
                }
                if(mRes.data) window.merch = mRes.data;
                if(actRes.data) window.activity = actRes.data;
                if(cRes.data && cRes.data[0]) window.contact = cRes.data[0];
                if(sRes.data && sRes.data[0]) {
                    window.siteSettings = sRes.data[0];
                    window.homeContent = sRes.data[0].home_content_html;
                }
                
                if(loader) loader.style.display = 'none';

                if(document.getElementById('home').classList.contains('active')) window.renderHome();
                if(document.getElementById('books').classList.contains('active')) window.renderBooks();
                if(document.getElementById('merch').classList.contains('active')) window.renderMerch();
                if(document.getElementById('author').classList.contains('active')) window.renderAuthorOverview();
                if(document.getElementById('activity').classList.contains('active')) window.renderActivity();
                if(document.getElementById('contact').classList.contains('active')) window.renderContact();
                if(document.getElementById('author-detail').classList.contains('active')) {
                     const currentAuthName = document.querySelector('.ad-name') ? document.querySelector('.ad-name').innerText : '';
                     if(currentAuthName.includes('æœ¬ç”Ÿç‡ˆ')) window.renderAuthorDetailPage('bunsen');
                     else if(currentAuthName.includes('è«æ–¯å¡æ‰˜')) window.renderAuthorDetailPage('moscato');
                }

                if(localStorage.getItem('glory_session')) checkSession(); 

            } catch (err) { 
                console.error("è³‡æ–™è®€å–å¤±æ•—:", err);
                document.getElementById('system-loading').style.display = 'none';
            }
        }
        
        fetchData();

        window.loginWithSupabase = async function() {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPwd').value;
            const msg = document.getElementById('loginMsg');
            msg.innerText = "ç™»å…¥ä¸­...";
            const { data, error } = await supabase.auth.signInWithPassword({ email: email, password: password });
            if (error) msg.innerText = "å¤±æ•—ï¼š" + error.message;
            else { msg.innerText = "æˆåŠŸï¼"; localStorage.setItem('glory_session', JSON.stringify(data.session)); window.route('admin'); }
        }

        window.logout = async function() { await supabase.auth.signOut(); localStorage.removeItem('glory_session'); alert('å·²ç™»å‡º'); window.location.reload(); }
        
        async function checkSession() {
            const { data } = await supabase.auth.getSession();
            if (data.session) { 
                isLoggedIn = true; 
                if(document.getElementById('admin').classList.contains('active')) window.route('admin'); 
            }
        }

        window.renderHeader = function() {
            const logo = document.getElementById('site-logo-container');
            if (window.siteSettings.logo_url) logo.innerHTML = `<img src="${window.siteSettings.logo_url}">`;
            else logo.innerHTML = `<span>âšœ</span> ${window.siteSettings.site_name || 'å‡±è–©GLORY'}`;
        }
        
        window.renderHome = function() {
            window.renderHeader();
            document.getElementById('homePageTitle').innerText = window.siteSettings.home_title || "NEW PUBLICATION";
            const notice = document.getElementById('homeNoticeArea');
            if(window.siteSettings.home_notice) { notice.innerHTML = window.siteSettings.home_notice; notice.style.display = 'block'; }
            else notice.style.display = 'none';
            
            const pub = window.books.filter(b => b.status === 'published' && b.is_carousel).sort((a,b) => (b.publish_year - a.publish_year) || (b.id - a.id));
            document.getElementById('homeCarousel').innerHTML = pub.map((b, i) => {
                // â˜…â˜…â˜… å„ªå…ˆä½¿ç”¨æ–°çš„ carousel_cover æ¬„ä½ï¼Œæ²’æœ‰å‰‡ç”¨ç›´å¼å°é¢ â˜…â˜…â˜…
                const img = b.carousel_cover || b.cover;
                return `<div class="carousel-slide ${i===0?'active':''}" style="background-image:url('${img}')"><div class="carousel-caption">${b.title}</div></div>`;
            }).join('');
            
            let html = "";
            const pubBooks = window.books.filter(b => b.status === 'published' && b.publish_year).sort((a,b) => (b.publish_year - a.publish_year) || (b.id - a.id));
            const years = [...new Set(pubBooks.map(b => b.publish_year))].sort((a,b) => b-a);
            
            years.forEach(y => {
                const bs = pubBooks.filter(b => b.publish_year === y);
                let list = bs.map(b => {
                    let c = "#ddd", icon = "";
                    const cat = b.category ? b.category.trim() : "";
                    if(cat === 'theme-blue') { c="#3FC3EB"; icon="https://res.cloudinary.com/dd9vqt742/image/upload/v1765245984/tag-blue_kfehod.png"; }
                    else if(cat === 'theme-red') { c="#F55660"; icon="https://res.cloudinary.com/dd9vqt742/image/upload/v1765245983/tag-red_y2u8ad.png"; }
                    else if(cat === 'theme-yellow') { c="#FFD45A"; icon="https://res.cloudinary.com/dd9vqt742/image/upload/v1765245982/tag_yellow_shyghq.png"; }
                    else if(cat === 'theme-black') { c="#A1A1A1"; icon="https://res.cloudinary.com/dd9vqt742/image/upload/v1765246252/tag-grey_ylkevb.png"; }
                    else if(cat === 'theme-green') { c="#A4CC1B"; icon="https://res.cloudinary.com/dd9vqt742/image/upload/v1765246252/tag-green_rxlarc.png"; }
                    else if(cat === 'theme-purple') { c="#CC99FF"; icon="https://res.cloudinary.com/dd9vqt742/image/upload/v1765246505/tag-purple_pzhxr6.png"; }
                    return `<div class="book-list-item" style="color:${c}!important"><img src="${icon}" class="home-book-tag">${b.title}</div>`;
                }).join('');
                html += `<div class="year-block"><div class="year-title">â–¶ ${y} å‡ºç‰ˆæ›¸ç±</div><div class="book-list-row">${list}</div></div>`;
            });
            document.getElementById('homeNewsContent').innerHTML = html + window.homeContent;
            
            let slides = document.querySelectorAll('.carousel-slide'), idx = 0;
            if(window.cInt) clearInterval(window.cInt);
            if(slides.length>1) window.cInt = setInterval(() => { slides[idx].classList.remove('active'); idx=(idx+1)%slides.length; slides[idx].classList.add('active'); }, 3500);
        }

        window.renderBooks = function() {
            document.getElementById('tagRow1').innerHTML = authorTags.map(t => `<button class="tag-btn ${t==='å…¨éƒ¨ä½œå“'?'active':''}" onclick="filterBooks('${t}', this)">${t}</button>`).join('');
            let counts = {};
            window.books.filter(b => b.status === 'published').forEach(b => { if(b.tags) b.tags.split(/,|ã€|ï¼Œ/).forEach(t => { let tag = t.trim(); if(tag) counts[tag] = (counts[tag]||0)+1; }); });
            let dTags = Object.keys(counts).filter(t => counts[t]>=2 && !themeTags.includes(t) && !authorTags.includes(t)).sort((a,b)=>counts[b]-counts[a]);
            document.getElementById('tagRow2').innerHTML = [...themeTags, ...dTags].map(t => `<button class="tag-btn" onclick="filterBooks('${t}', this)">${t}</button>`).join('');
            window.filterBooks('å…¨éƒ¨ä½œå“');
        }

        window.filterBooks = function(filter, btn) {
            if(btn) { document.querySelectorAll('.tag-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); }
            const list = document.getElementById('bookCatalog');
            let res = window.books.filter(b => b.status === 'published').sort((a,b) => (b.publish_year - a.publish_year) || (b.id - a.id));
            if(filter.startsWith('theme-')) res = res.filter(b => b.category === filter);
            else if(filter !== 'å…¨éƒ¨ä½œå“') res = res.filter(b => b.tags.includes(filter) || b.author.includes(filter));
            
            list.innerHTML = res.map(b => {
                let iconUrl = "";
                const cat = b.category ? b.category.trim() : ""; 
                if(cat === 'theme-blue') iconUrl = "https://res.cloudinary.com/dd9vqt742/image/upload/v1765245984/tag-blue_kfehod.png";
                else if(cat === 'theme-red') iconUrl = "https://res.cloudinary.com/dd9vqt742/image/upload/v1765245983/tag-red_y2u8ad.png";
                else if(cat === 'theme-yellow') iconUrl = "https://res.cloudinary.com/dd9vqt742/image/upload/v1765245982/tag_yellow_shyghq.png";
                else if(cat === 'theme-black') iconUrl = "https://res.cloudinary.com/dd9vqt742/image/upload/v1765246252/tag-grey_ylkevb.png";
                else if(cat === 'theme-green') iconUrl = "https://res.cloudinary.com/dd9vqt742/image/upload/v1765246252/tag-green_rxlarc.png";
                else if(cat === 'theme-purple') iconUrl = "https://res.cloudinary.com/dd9vqt742/image/upload/v1765246505/tag-purple_pzhxr6.png";
                
                return `<article class="book-card ${cat}"><div class="book-header"><div class="book-title-group"><img src="${iconUrl}" class="book-tag-img"><span class="book-title t-color">${b.title}</span></div><span class="book-price">NTD.${b.price}</span></div><div class="divider t-color"></div><div class="book-meta t-color">TAGï¼š${b.tags}</div><div class="book-content"><img src="${b.cover}" class="book-cover"><div class="book-desc">${b.description || ''}</div></div><div class="author-name">${b.author}</div><div class="action-buttons"><button class="btn btn-buy" onclick="window.open('${b.buy_link || '#'}')">è³¼ è²·</button><button class="btn btn-info" onclick="window.open('${b.info_link || '#'}')">è³‡ è¨Š é </button></div></article>`;
            }).join('');
        }
        window.filterByColor = function(c) { window.filterBooks(c); }

        window.renderMerch = function() {
            document.getElementById('merchCatalog').innerHTML = window.merch.map(m => `<article class="book-card" style="border-bottom-color:#A67C52;"><div class="book-header"><div class="book-title-group"><img src="https://res.cloudinary.com/dd9vqt742/image/upload/v1765245172/tag-brown_un1lys.png" class="book-tag-img"><span class="book-title" style="color:#A67C52;">${m.title}</span></div><span class="book-price">NTD.${m.price}</span></div><div class="divider" style="border-color:#A67C52; opacity:0.5;"></div><div class="book-meta" style="color:#A67C52;">TAGï¼š${m.tags}</div><div class="book-content"><img src="${m.cover}" class="book-cover"><div class="book-desc">${m.description || ''}</div></div><div class="action-buttons"><button class="btn btn-buy" style="background:#A67C52;" onclick="window.open('${m.buy_link || '#'}')">è³¼ è²·</button><button class="btn btn-info" style="background:#D4AF37;color:#000;" onclick="window.open('${m.info_link || '#'}')">è³‡ è¨Š é </button></div></article>`).join('');
        }
        
        window.renderActivity = function() {
            document.getElementById('activityList').innerHTML = window.activity.map((a, i) => `<div class="activity-item"><div class="activity-content-wrapper"><div class="activity-name">${a.title}</div><div class="activity-date">${a.date_range}</div><div class="activity-desc">${a.content}</div></div><div class="activity-image-wrapper"><img src="${a.image}" class="activity-main-img"><div class="activity-number">${(i+1).toString().padStart(2, '0')}</div></div></div>`).join('');
        }

        window.renderContact = function() {
            if(window.contact) {
                document.getElementById('contactImage').src = window.contact.image;
                document.getElementById('contactContent').innerHTML = window.contact.content;
            }
        }

        window.renderAuthorOverview = function() {
            if(window.authors.moscato) {
                document.getElementById('ov-avatar-moscato').src = window.authors.moscato.avatar;
                window.renderOverviewList('è«æ–¯å¡æ‰˜', 'ov-list-moscato');
            }
            if(window.authors.bunsen) {
                document.getElementById('ov-avatar-bunsen').src = window.authors.bunsen.avatar;
                window.renderOverviewList('æœ¬ç”Ÿç‡ˆ', 'ov-list-bunsen');
            }
        }

        window.renderOverviewList = function(authorName, elId) {
            const el = document.getElementById(elId);
            const myBooks = window.books.filter(b => b.author.includes(authorName)).sort((a,b)=>b.id-a.id);
            const makeList = (title, list) => list.length ? `<div class="ac-list-section"><div class="ac-list-title">${title}</div><ul class="ac-list">${list.map(b=>`<li>â—†ã€Š${b.title}ã€‹</li>`).join('')}</ul></div>` : '';
            let authLinks = "";
            const key = authorName==='æœ¬ç”Ÿç‡ˆ'?'bunsen':'moscato';
            if(window.authors[key]) authLinks = window.authors[key].linksHTML || "";
            el.innerHTML = makeList('ã€é€£è¼‰ä¸­ä½œå“ã€‘', myBooks.filter(b=>b.status==='ongoing')) + makeList('ã€å®Œçµä½œå“ã€‘', myBooks.filter(b=>b.status==='completed')) + makeList('ã€å‡ºç‰ˆä½œå“ã€‘', myBooks.filter(b=>b.status==='published')) + authLinks;
        }

        window.routeAuthorDetail = function(id) {
             document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));
             document.getElementById('author-detail').classList.add('active');
             window.renderAuthorDetailPage(id);
             window.scrollTo(0,0);
        }

        window.renderAuthorDetailPage = function(id) {
            const data = window.authors[id];
            if (!data) return;
            const container = document.getElementById('ad-content');
            const myBooks = window.books.filter(b => b.author.includes(data.name)).sort((a,b) => (b.publish_year - a.publish_year) || (b.id - a.id));
            const ongoing = myBooks.filter(b => b.status === 'ongoing');
            const completed = myBooks.filter(b => b.status === 'completed');
            const published = myBooks.filter(b => b.status === 'published');
            const makeTextList = (arr) => arr.map(b => `<div class="text-work-item"><a class="t-work-title">ã€Š${b.title}ã€‹</a><div class="t-work-meta">${b.tags.split(',').join('ã€')}</div><div class="t-work-meta">${b.cp ? b.cp : ''}</div><div class="t-work-meta">å­—æ•¸ï¼š${b.word_count||'-'}</div>${b.description ? `<div class="t-work-note">${b.description.replace(/\n/g, '<br>')}</div>` : ''}</div>`).join('');
            const makePubList = (arr) => arr.map(b => `<div class="pub-work-item"><img src="${b.cover}" class="pub-cover"><div class="pub-title">ã€Š${b.title.replace(/\n/g, '<br>')}ã€‹</div><div class="pub-meta">${b.tags}</div></div>`).join('');
            let topSection = `<div class="author-detail-header"><img src="${data.avatar}" class="ad-avatar"><div class="ad-info"><div class="ad-name">${data.name}</div><div class="ad-bio rich-text-content">${data.bio || ''}</div></div></div>`;
            
            if(id === 'bunsen') {
                container.innerHTML = topSection + `<div class="bunsen-layout-grid"><div class="left-announce"><div class="announce-section"><h3>ä½œè€…å…¬å‘Š & å°ˆè¨ªç´€éŒ„</h3><div class="announce-content rich-text-content">${data.news || ''}</div></div><div class="newsletter-box" style="padding:0; border:none; margin-top:30px;">${document.getElementById('mailerlite-form-template').innerHTML}</div></div><div class="right-links"><div class="links-wrapper rich-text-content">${data.linksHTML || ''}</div></div></div><div class="section-header"><span>ç”Ÿç”Ÿå®‡å®™</span></div><div class="universe-links rich-text-content">${data.universeHTML || ""}</div><div class="section-header"><span>é€£è¼‰ä¸­ä½œå“</span></div><div class="text-work-grid">${makeTextList(ongoing)}</div><div class="section-header"><span>å®Œçµä½œå“</span></div><div class="text-work-grid">${makeTextList(completed)}</div><div class="section-header"><span>å‡ºç‰ˆä½œå“</span></div><div class="pub-work-grid">${makePubList(published)}</div>`;
            } else {
                container.innerHTML = topSection + `<div style="background:#2a2a2a;padding:20px;border-radius:10px;margin-bottom:40px;" class="rich-text-content">${data.linksHTML || ''}</div><div class="section-header"><span>é€£è¼‰ä¸­ä½œå“</span></div><div class="text-work-grid">${makeTextList(ongoing)}</div><div class="section-header"><span>å®Œçµä½œå“</span></div><div class="text-work-grid">${makeTextList(completed)}</div><div class="section-header"><span>å‡ºç‰ˆä½œå“</span></div><div class="pub-work-grid">${makePubList(published)}</div>`;
            }
        }
        
        // --- Admin Render ---
        window.renderAdmin = function() { 
            window.renderBookList(); window.loadAuthorData(); window.renderMerchList(); window.renderActList(); window.initEditors();
            document.getElementById('homeContentEditor').innerHTML = window.homeContent; 
            document.getElementById('setSiteName').value = window.siteSettings.site_name || '';
            document.getElementById('setLogoUrl').value = window.siteSettings.logo_url || '';
            document.getElementById('setHomeTitle').value = window.siteSettings.home_title || '';
            document.getElementById('setHomeNoticeEditor').innerHTML = window.siteSettings.home_notice || '';
            document.getElementById('inContactImg').value = window.contact.image || '';
            document.getElementById('contactContentEditor').innerHTML = window.contact.content || '';
        }
        
        window.switchAdminTab = function(tab) {
            document.querySelectorAll('[id^="adm-"]').forEach(el => el.style.display = 'none');
            const target = document.getElementById('adm-'+tab);
            if(target) target.style.display = 'block';
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active')); 
            const btn = document.querySelector(`.tab-btn[onclick*="${tab}"]`);
            if(btn) btn.classList.add('active');
            
            // é‡æ–°åˆå§‹åŒ–ï¼Œä»¥é˜²é é¢åˆ‡æ›å°è‡´ç·¨è¼¯å™¨æ¶ˆå¤±
            if(tab === 'authors') window.loadAuthorData();
        }
        window.togglePubFields = function() { const st = document.getElementById('inStatus').value; document.getElementById('pubFields').style.display = st==='published'?'block':'none'; }
        
        window.renderBookList = function() { document.getElementById('adminBookList').innerHTML = window.books.sort((a,b)=>b.id-a.id).map(b => `<tr style="border-bottom:1px solid #444;"><td style="padding:10px;">${b.id}</td><td style="padding:10px;">${b.title.substring(0,10)}...</td><td style="padding:10px;">${b.publish_year||'-'}</td><td style="padding:10px;">${b.author}</td><td style="padding:10px;text-align:right;"><button onclick="editBook(${b.id})" style="background:var(--theme-yellow);border:none;cursor:pointer;">ç·¨è¼¯</button><button onclick="deleteBook(${b.id})" style="background:#F55660;color:#fff;border:none;cursor:pointer;margin-left:5px;">åˆªé™¤</button></td></tr>`).join(''); }
        
        window.renderMerchList = function() { document.getElementById('adminMerchList').innerHTML = window.merch.map(m => `<div style="border-bottom:1px solid #444; padding:10px;"><b>${m.title}</b> <div style="float:right;"><button onclick="editMerch(${m.id})">ç·¨è¼¯</button> <button onclick="deleteMerch(${m.id})" style="background:#F55660;color:#fff;border:none;margin-left:5px;cursor:pointer;">åˆªé™¤</button></div></div>`).join(''); }
        
        window.renderActList = function() { document.getElementById('adminActList').innerHTML = window.activity.map(a => `<div style="border-bottom:1px solid #444; padding:10px;"><b>${a.title}</b> <div style="float:right;"><button onclick="editActivity(${a.id})">ç·¨è¼¯</button> <button onclick="deleteActivity(${a.id})" style="background:#F55660;color:#fff;border:none;margin-left:5px;cursor:pointer;">åˆªé™¤</button></div></div>`).join(''); }

        window.editBook = function(id) {
            const b = window.books.find(x => x.id === id); 
            document.getElementById('editId').value = b.id; document.getElementById('inTitle').value = b.title; document.getElementById('inStatus').value = b.status;
            document.getElementById('inCP').value = b.cp||''; document.getElementById('inWordCount').value = b.word_count||''; document.getElementById('inTags').value = b.tags; 
            document.getElementById('inCover').value = b.cover||'';
            document.getElementById('inCarouselCover').value = b.carousel_cover||''; // æ–°å¢æ¬„ä½
            document.getElementById('inPromoBg').value = b.promo_bg||''; // å®£å‚³é èƒŒæ™¯åœ–

            document.getElementById('inYear').value = b.publish_year || ''; document.getElementById('bookDescEditor').innerHTML = b.description || ''; 
            if(b.status === 'published') { document.getElementById('inPrice').value = b.price; document.getElementById('inBuy').value = b.buy_link; document.getElementById('inCarousel').checked = b.is_carousel; document.getElementById('inColor').value = b.category; }
            document.getElementById('inInfo').value = b.info_link || ''; window.togglePubFields();
        }
        window.editMerch = function(id) { const m = window.merch.find(x => x.id === id); document.getElementById('editMerchId').value = m.id; document.getElementById('inMerchTitle').value = m.title; document.getElementById('inMerchPrice').value = m.price; document.getElementById('inMerchTags').value = m.tags; document.getElementById('inMerchCover').value = m.cover; document.getElementById('inMerchBuy').value = m.buy_link; document.getElementById('inMerchInfo').value = m.info_link; document.getElementById('merchDescEditor').innerHTML = m.description; }
        window.editActivity = function(id) { const a = window.activity.find(x => x.id === id); document.getElementById('editActId').value = a.id; document.getElementById('inActTitle').value = a.title; document.getElementById('inActDate').value = a.date_range; document.getElementById('inActImg').value = a.image; document.getElementById('actContentEditor').innerHTML = a.content; }
        window.loadAuthorData = function() { 
            const id = document.getElementById('authorSelect').value; const data = window.authors[id]; 
            if(data) {
                document.getElementById('authNewsEditor').innerHTML = data.news || ''; 
                document.getElementById('authAvatar').value = data.avatar || ''; 
                document.getElementById('authBioEditor').innerHTML = data.bio || ''; 
                document.getElementById('authLinksEditor').innerHTML = data.linksHTML || ''; 
                // ä¿®å¾©ç”Ÿç”Ÿå®‡å®™ç·¨è¼¯å™¨é¡¯ç¤ºé‚è¼¯
                const group = document.getElementById('bunsenUniverseGroup');
                const editor = document.getElementById('authUniverseEditor');
                if(id === 'bunsen') { 
                    group.style.display = 'block'; 
                    editor.innerHTML = data.universeHTML || ''; 
                } else { 
                    group.style.display = 'none'; 
                } 
            }
        }
        
        // --- Save Functions (With Safe ID Handling) ---
        window.saveBook = async function() {
            if(!supabase) return;
            try {
                const idVal = document.getElementById('editId').value;
                const id = idVal === "" ? null : idVal; 

                const data = {
                    title: document.getElementById('inTitle').value, author: document.getElementById('inAuthor').value, status: document.getElementById('inStatus').value,
                    tags: document.getElementById('inTags').value, 
                    cover: document.getElementById('inCover').value, 
                    carousel_cover: document.getElementById('inCarouselCover').value, // æ©«å¼è¼ªæ’­åœ–
                    promo_bg: document.getElementById('inPromoBg').value, // å®£å‚³é èƒŒæ™¯åœ–
                    description: document.getElementById('bookDescEditor').innerHTML,
                    word_count: document.getElementById('inWordCount').value, cp: document.getElementById('inCP').value, price: document.getElementById('inPrice').value,
                    category: document.getElementById('inColor').value, buy_link: document.getElementById('inBuy').value, info_link: document.getElementById('inInfo').value,
                    is_carousel: document.getElementById('inCarousel').checked, publish_year: document.getElementById('inYear').value
                };

                if(id) await supabase.from('books').update(data).eq('id', id); 
                else await supabase.from('books').insert([data]);
                
                alert('æ›¸ç±å„²å­˜æˆåŠŸï¼'); 
                fetchData(); 
                document.getElementById('editId').value = ''; document.getElementById('inTitle').value = ''; document.getElementById('bookDescEditor').innerHTML = ''; document.getElementById('inCarouselCover').value = ''; document.getElementById('inPromoBg').value = '';
                
                if(document.getElementById('addToNews').checked) {
                    const today = new Date().toISOString().split('T')[0];
                    const msg = `[${today}] ã€Š${data.title}ã€‹ æ–°æ›¸ä¸Šæ¶ï¼<br>`;
                    window.siteSettings.home_notice = msg + (window.siteSettings.home_notice || "");
                    await supabase.from('site_settings').update({ home_notice: window.siteSettings.home_notice }).eq('id', 1);
                }
            } catch(e) { console.error(e); alert("å„²å­˜å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ˜¯å¦å·²æ–°å¢ carousel_cover èˆ‡ promo_bg æ¬„ä½"); }
        }
        window.deleteBook = async function(id) { if(!supabase) return; if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) { await supabase.from('books').delete().eq('id', id); fetchData(); } }
        
        window.saveMerch = async function() {
            if(!supabase) return;
            try {
                const idVal = document.getElementById('editMerchId').value;
                const id = idVal === "" ? null : idVal;

                const data = { title: document.getElementById('inMerchTitle').value, price: document.getElementById('inMerchPrice').value, tags: document.getElementById('inMerchTags').value, cover: document.getElementById('inMerchCover').value, description: document.getElementById('merchDescEditor').innerHTML, buy_link: document.getElementById('inMerchBuy').value, info_link: document.getElementById('inMerchInfo').value };
                
                if(id) await supabase.from('merch').update(data).eq('id', id); 
                else await supabase.from('merch').insert([data]);
                
                alert('å‘¨é‚Šå„²å­˜æˆåŠŸï¼'); fetchData();
            } catch(e) { console.error(e); alert("å„²å­˜å¤±æ•—"); }
        }
        window.deleteMerch = async function(id) { if(!supabase) return; if(confirm("ç¢ºå®šåˆªé™¤æ­¤å‘¨é‚Šï¼Ÿ")) { await supabase.from('merch').delete().eq('id', id); fetchData(); } }

        window.saveActivity = async function() {
            if(!supabase) return;
            try {
                const idVal = document.getElementById('editActId').value;
                const id = idVal === "" ? null : idVal;

                const data = { title: document.getElementById('inActTitle').value, date_range: document.getElementById('inActDate').value, image: document.getElementById('inActImg').value, content: document.getElementById('actContentEditor').innerHTML };
                
                if(id) await supabase.from('activities').update(data).eq('id', id); 
                else await supabase.from('activities').insert([data]);
                
                alert('æ´»å‹•å„²å­˜æˆåŠŸï¼'); fetchData();
            } catch(e) { console.error(e); alert("å„²å­˜å¤±æ•—"); }
        }
        window.deleteActivity = async function(id) { if(!supabase) return; if(confirm("ç¢ºå®šåˆªé™¤æ­¤æ´»å‹•ï¼Ÿ")) { await supabase.from('activities').delete().eq('id', id); fetchData(); } }

        window.saveContact = async function() {
            try {
                const data = { image: document.getElementById('inContactImg').value, content: document.getElementById('contactContentEditor').innerHTML };
                const { count } = await supabase.from('contact').select('*', { count: 'exact', head: true });
                if(count > 0) await supabase.from('contact').update(data).eq('id', 1); else await supabase.from('contact').insert([{id: 1, ...data}]);
                alert('è¯çµ¡è³‡è¨Šå·²æ›´æ–°ï¼'); fetchData();
            } catch(e) { console.error(e); alert("å„²å­˜å¤±æ•—"); }
        }
        window.saveAuthorInfo = async function() {
            try {
                const id = document.getElementById('authorSelect').value;
                const data = { news: document.getElementById('authNewsEditor').innerHTML, avatar: document.getElementById('authAvatar').value, bio: document.getElementById('authBioEditor').innerHTML, links_html: document.getElementById('authLinksEditor').innerHTML, universe_html: id === 'bunsen' ? document.getElementById('authUniverseEditor').innerHTML : "" };
                await supabase.from('authors').update(data).eq('id', id);
                alert('ä½œè€…è³‡æ–™å·²æ›´æ–°ï¼'); fetchData();
            } catch(e) { console.error(e); alert("å„²å­˜å¤±æ•—"); }
        }
        window.saveHomeSettings = async function() {
            try {
                const data = { site_name: document.getElementById('setSiteName').value, logo_url: document.getElementById('setLogoUrl').value, home_title: document.getElementById('setHomeTitle').value, home_notice: document.getElementById('setHomeNoticeEditor').innerHTML, home_content_html: document.getElementById('homeContentEditor').innerHTML };
                const { count } = await supabase.from('site_settings').select('*', { count: 'exact', head: true });
                if(count > 0) await supabase.from('site_settings').update(data).eq('id', 1); else await supabase.from('site_settings').insert([{id: 1, ...data}]);
                alert('é¦–é è¨­å®šå·²æ›´æ–°ï¼'); fetchData();
            } catch(e) { console.error(e); alert("å„²å­˜å¤±æ•—"); }
        }
    </script>
    <script>function ml_webform_success_26129406(){var $=ml_jQuery||jQuery;$('.ml-subscribe-form-26129406 .row-success').show();$('.ml-subscribe-form-26129406 .row-form').hide();}</script>
    <script src="https://groot.mailerlite.com/js/w/webforms.min.js?v176e10baa5e7ed80d35ae235be3d5024" type="text/javascript"></script>
    <template id="mailerlite-form-template"><div id="mlb2-26129406" class="ml-form-embedContainer ml-subscribe-form ml-subscribe-form-26129406"><div class="ml-form-align-center "><div class="ml-form-embedWrapper embedForm"><div class="ml-form-embedBody ml-form-embedBodyDefault row-form"><div class="ml-form-embedContent"><h4>ç”Ÿç”Ÿé–’èŠ</h4><p>ç•™ä¸‹Emailï¼Œæ±ºä¸éŒ¯éæ–°æ›¸é è³¼å„ªæƒ æ´»å‹•ï¼Œé‚„å¯ç²å¾—CXCå°ˆæ¬„è¨‚é–±å…è²»è©¦é–±ç« ç¯€èˆ‡å‰µä½œå¹•å¾Œæ•…äº‹ï¼<br></p></div><form class="ml-block-form" action="https://assets.mailerlite.com/jsonp/1531661/forms/154771460329572011/subscribe" data-code="" method="post" target="_blank"><div class="ml-form-formContent"><div class="ml-form-fieldRow ml-last-item"><div class="ml-field-group ml-field-email ml-validate-email ml-validate-required"><input aria-label="email" aria-required="true" type="email" class="form-control" data-inputmask="" name="fields[email]" placeholder="Email" autocomplete="email"></div></div></div><input type="hidden" name="ml-submit" value="1"><div class="ml-form-embedSubmit"><button type="submit" class="primary">å…è²»è¨‚é–±é›»å­å ±</button><button disabled="disabled" style="display: none;" type="button" class="loading"><div class="ml-form-embedSubmitLoad"></div><span class="sr-only">Loading...</span></button></div><input type="hidden" name="anticsrf" value="true"></form></div><div class="ml-form-successBody row-success" style="display: none"><div class="ml-form-successContent"><h4>æ„Ÿè¬è¨‚é–±ï¼</h4><p><br></p></div></div></div></div></div></template>
</body>
</html>
